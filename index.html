<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maze Maker</title>
    <script src="js/pixi.min.js"></script>
    <script>
        let app, player;
        let keys = {};
        let keysDiv;

        // constants for player movement
        const W = "87";
        const A = "65";
        const S = "83";
        const D = "68";
        const LEFT = "37";
        const UP = "38";
        const RIGHT = "39";
        const DOWN = "40";

        const X_SPEED = 5;
        const Y_SPEED = 5;

        window.onload = function() {
            app = new PIXI.Application(
                {
                    width: 800,
                    height: 600,
                    backgroundColor: 0xAAAAAA
                }
            );
            document.body.appendChild(app.view);

            // create the player object
            player = new PIXI.Sprite.from("images/player.png");
            // where transformations are relative to
            player.anchor.set(0.5); // set to center
            // set player position
            player.x = app.view.width / 2;
            player.y = app.view.height / 2;
            app.stage.addChild(player);


            // keyboard event listeners
            window.addEventListener("keydown", keysDown);
            window.addEventListener("keyup", keysUp);

            // ticker to call gameLoop function during Pixi eventhandler
            app.ticker.add(gameLoop);
            // to display key info in the body
            keysDiv = document.querySelector("#keys");
f
            function keysDown (e) {
                console.log(e.keyCode);
                keys[e.keyCode] = true;
            }

            function keysUp (e) {
                console.log(e.keyCode);
                keys[e.keyCode] = false;
            }

            function gameLoop() {
                keysDiv.innerHTML = JSON.stringify(keys);
                
                // player movement
                if (keys[W] || keys[UP]) { player.y -= Y_SPEED } 
                if (keys[A] || keys[LEFT]) { player.x -= X_SPEED }
                if (keys[S] || keys[DOWN]) { player.y += Y_SPEED }
                if (keys[D] || keys[RIGHT]) { player.x += X_SPEED }
            }
        }
    </script>
</head>
<body>
    <div id="keys"></div>
</body>
</html>